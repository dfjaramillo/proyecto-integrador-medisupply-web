<!-- Mobile overlay backdrop -->
<div class="sidebar-overlay" 
     [class.show]="!sidebarCollapsed()" 
     (click)="toggleSidebar()">
</div>

<!-- Mobile toggle button -->
<button class="sidebar-toggle" (click)="toggleSidebar()" type="button" aria-label="Toggle sidebar">
  <mat-icon>{{ sidebarCollapsed() ? 'menu' : 'close' }}</mat-icon>
</button>

<aside class="sidebar" [class.collapsed]="sidebarCollapsed()">
  <div class="sidebar-header">
    <img src="/images/logo.png" alt="MediSupply" class="sidebar-logo">
  </div>

  <nav class="sidebar-nav"> 
    @if(isAdministrador() || canSeeProveedores()){       
      <div class="nav-section">
        <button class="section-header" (click)="toggleAdministracion()" type="button">
          <mat-icon>admin_panel_settings</mat-icon>
          <h3 class="section-title">ADMINISTRACIÓN</h3>
          <mat-icon class="expand-icon" [class.expanded]="administracionExpanded()">
            expand_more
          </mat-icon>
        </button>
        
        <div class="nav-items pl-20" [class.collapsed]="!administracionExpanded()">
          @if(isAdministrador()){
          <a class="nav-item" routerLink="/usuarios" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>person</mat-icon>
            <span>Usuarios</span>
          </a>
          }
          @if(canSeeProveedores()){
          <a class="nav-item" routerLink="/proveedores" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>business</mat-icon>
            <span>Proveedores</span>
          </a>
          }          
        </div>
      </div>    
    }
    <!-- INVENTARIO Section - Visible for Administrador and Compras -->
    @if (canSeeInventario()) {
      <div class="nav-section">      
        <a class="nav-item" routerLink="/inventario" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>inventory_2</mat-icon>
          <span>INVENTARIO</span>
        </a>
      </div>
    }

    <!-- LOGÍSTICA Section - Visible for Administrador and Logistica -->
    @if (canSeeLogistica()) {
      <div class="nav-section">      
        <a class="nav-item" routerLink="/logistica/rutas" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>route</mat-icon>
          <span>LOGÍSTICA</span>
        </a>
      </div>
    }

    <!-- VENTAS Section - Visible for Administrador and Ventas -->
    @if (canSeeVentas()) {
      <div class="nav-section">
        <button class="section-header" (click)="toggleVentas()" type="button">
          <mat-icon>attach_money</mat-icon>
          <h3 class="section-title">VENTAS</h3>
          <mat-icon class="expand-icon" [class.expanded]="ventasExpanded()">
            expand_more
          </mat-icon>
        </button>
        
        <div class="nav-items pl-20" [class.collapsed]="!ventasExpanded()">
          <a class="nav-item" routerLink="/planes-ventas" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>assignment</mat-icon>
            <span>Planes de ventas</span>
          </a>
          <a class="nav-item" routerLink="/ventas/reporte-operativo" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>bar_chart</mat-icon>
            <span>Reporte operativo</span>
          </a>
          <!-- <a class="nav-item" routerLink="/reporte-operativo" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>bar_chart</mat-icon>
            <span>Reporte operativo</span>
          </a>
          <a class="nav-item" routerLink="/informe-vendedores" routerLinkActive="active" (click)="closeSidebar()">
            <mat-icon>description</mat-icon>
            <span>Informe de vendedores</span>
          </a> -->
        </div>
      </div>
    }
  </nav>

  <div class="sidebar-footer">
    <button class="logout-btn" (click)="onLogout()" type="button">
      <mat-icon>logout</mat-icon>
      <span>CERRAR SESIÓN</span>
    </button>
  </div>
</aside>
